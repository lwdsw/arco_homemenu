<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="arco_homemenu.ArcoGridStack" owl="1">
        <div class="grid-stack-box" t-ref="arcoGridStackRef">
            <div class="grid-stack" t-foreach="state.homeData" t-as="home" t-key="home_index" t-attf-class="#{props.homeId == home.id ? 'arco-show' : 'arco-hide'}">
                <div t-foreach="getHomeFolders(home.id)" t-as="folder" t-key="folder.id" class="grid-stack-item" t-att-id="folder.id" t-att-gs-id="folder.id" t-att-key="folder.id" t-att-gs-x="folder.x" t-att-gs-y="folder.y" t-att-gs-w="folder.w" t-att-gs-h="folder.h" t-att-gs-min-w="'3'" t-att-gs-min-h="'2'">
                    <div class="arco-panel">
                        <div class="arco-panel-heading">
                            <div class="arco-panel-title">
                                <t t-esc="folder.name"/>
                            </div>
                            <div class="arco-operate" t-if="state.mode == 'edit'">
                                <t t-call="arco_homemenu.ArcoGridStack.ManagerSVG"/>
                            </div>
                        </div>
                        <div class="arco-panel-body">
                            <div class="arco-folder-menus">
                                <a class="arco-folder-menu" t-foreach="folder.menuitems" t-as="menu" t-key="menu_index" t-att-title="menu.name" 
                                    t-att-href="getMenuItemHref(menu)" t-on-click="(ev) => this.onMenuClick(ev, menu)">
                                    <div class="arco-app-box">
                                        <div class="arco-app-icon">
                                            <t t-if="menu.webIconData">
                                                <img t-if="menu.webIconData.startsWith('P')" class="arco-app-img" t-attf-src="data:image/svg+xml;base64,#{menu.webIconData}"/>
                                                <img t-else="" class="arco-app-img" t-attf-src="data:image/png;base64,#{menu.webIconData}"/>
                                            </t>
                                            <t t-else="">
                                                <t t-if="menu.webIcon">
                                                    <img class="arco-app-img" t-attf-src="#{menu.webIcon.replace(',', '/')}"/>
                                                </t>
                                                <t t-else="">
                                                    <img class="arco-app-img" t-attf-src="/base/static/description/icon.png"/>
                                                </t>
                                            </t>
                                        </div>
                                        <div class="arco-app-name" t-att-title="menu.name" t-esc="menu.name"/>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>


    <t t-name="arco_homemenu.ArcoGridStack.ManagerSVG" owl="1">
        <svg t="1726821315141" class="icon" viewBox="0 0 1024 1024" version="1.1"
            xmlns="http://www.w3.org/2000/svg" p-id="11715" width="28" height="28">
            <path d="M503.4496 392.5504a42.6496 42.6496 0 1 1 0-85.3504 42.6496 42.6496 0 0 1 0 85.3504z m0 170.6496a42.6496 42.6496 0 1 1 0-85.3504 42.6496 42.6496 0 0 1 0 85.3504z m0 170.6496a42.6496 42.6496 0 1 1 0-85.2992 42.6496 42.6496 0 0 1 0 85.2992z" fill="#7c2ba9" p-id="11716"></path>
        </svg>
        <div class="arco-manager-dropdown">
            <div class="arco-manager-dropdownitem-box">
                <div class="arco-manager-dropdownitem">
                    <div class="arco-rename">
                        <input type="text" class="arco-rename-input o_input" placeholder="Enter new name" t-att-id="'name_' + home.id + '_' + folder.id"/>
                        <div class="arco-manager-btn arco-rename-btn" t-on-click="() => this.onClickRename(folder.id, 'name_' + home.id + '_' + folder.id)">
                            <i class="fa fa-cloud-upload"/>
                            Confirm
                        </div>
                    </div>
                </div>
                <div class="arco-manager-dropdownitem">
                    <div class="arco-manager-btn arco-delete-btn" t-on-click="() => this.onClickRemove(folder.id)">
                        <i class="fa fa-trash-o"/>
                        Remove
                    </div>
                </div>
                <div class="arco-manager-dropdownitem">
                    <div class="arco-manager-btn arco-menus-btn" t-on-click="() => this.onClickManageMenu(home.id, folder._id)">
                        <i class="fa fa-plus"/>
                        Manage Menus
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
